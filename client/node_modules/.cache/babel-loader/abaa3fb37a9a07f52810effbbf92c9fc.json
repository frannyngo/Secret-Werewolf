{"ast":null,"code":"var _jsxFileName = \"/Users/francistan/Desktop/secretwerewolf/client/src/components/Multiplayer.js\",\n    _s = $RefreshSig$();\n\nimport { Redirect, useLocation } from \"react-router-dom\";\nimport { io } from 'socket.io-client';\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet socket;\n\nconst Multiplayer = ({\n  token\n}) => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [roomName, setRoomName] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const ENDPOINT = 'http://localhost:5000';\n  const location = useLocation();\n  const socket = io(ENDPOINT, {\n    transports: ['websocket'],\n    upgrade: false\n  });\n\n  const sendMessage = e => {\n    e.preventDefault();\n\n    if (message) {\n      setMessages(...messages, message);\n      socket.emit('sendMessage', message, username, roomName, () => {\n        setMessage('');\n      });\n    }\n\n    ;\n  };\n\n  console.log(messages); // -----------------------JOIN/DISCONNECT------------------>\n\n  useEffect(() => {\n    const socket = io(ENDPOINT, {\n      transports: ['websocket'],\n      upgrade: false\n    });\n    ;\n    const {\n      name,\n      username\n    } = location;\n    setUsername(username);\n    setRoomName(name);\n    socket.emit('join', {\n      username,\n      roomName\n    }, () => {});\n    return () => {\n      socket.emit('disconnected', {\n        username\n      });\n      socket.off();\n    };\n  }, [ENDPOINT, location, !username, !roomName]); // -------------SEND MESSAGE/ADD TO MESSAGES--------------->\n\n  useEffect(() => {\n    socket.on('message', message => {\n      setMessages([...messages, message]);\n    });\n  }, [messages]); // ----------------------------------------->\n\n  if (!location.name) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"outerContainer\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"multiContainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"infoBar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftInnerContainer\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: roomName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"formz\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"inputz\",\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            onKeyPress: e => e.key === 'Enter' ? sendMessage(e) : null,\n            placeholder: \"What would you like to say?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"sendButton\",\n            onClick: e => {\n              sendMessage(e);\n            },\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Multiplayer, \"j9DKIQ4KKlNtpjUdKNwUC+KK6VY=\", false, function () {\n  return [useLocation];\n});\n\n_c = Multiplayer;\nexport default Multiplayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Multiplayer\");","map":{"version":3,"sources":["/Users/francistan/Desktop/secretwerewolf/client/src/components/Multiplayer.js"],"names":["Redirect","useLocation","io","useState","useEffect","socket","Multiplayer","token","username","setUsername","roomName","setRoomName","message","setMessage","messages","setMessages","ENDPOINT","location","transports","upgrade","sendMessage","e","preventDefault","emit","console","log","name","off","on","target","value","key"],"mappings":"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","sourcesContent":["import { Redirect, useLocation } from \"react-router-dom\";\nimport { io } from 'socket.io-client'\nimport { useState, useEffect } from \"react\";\n\nlet socket;\n\nconst Multiplayer = ({ token }) => {\n    const [ username, setUsername ] = useState('')\n    const [ roomName, setRoomName ] = useState('');\n    const [ message, setMessage ] = useState('');\n    const [ messages, setMessages ] = useState([]);\n    const ENDPOINT = 'http://localhost:5000';\n\n    const location = useLocation();\n    const socket = io(ENDPOINT, {transports: ['websocket'], upgrade: false});\n\nconst sendMessage = (e) => {\n    e.preventDefault();\n\n    if (message) {\n        setMessages(...messages, message);\n        socket.emit('sendMessage', message, username, roomName, () => {\n            setMessage('');\n        });\n    };\n}\n\nconsole.log(messages);\n// -----------------------JOIN/DISCONNECT------------------>\nuseEffect(() => {\n    const socket = io(ENDPOINT, {transports: ['websocket'], upgrade: false});\n    ;\n    const { name, username } = location\n    setUsername(username);\n    setRoomName(name);\n\n    socket.emit('join', { username, roomName }, () => {\n\n    });\n\n    return () => {\n        socket.emit('disconnected', { username })\n        socket.off();\n    }\n\n}, [ENDPOINT, location, !username, !roomName]);\n\n// -------------SEND MESSAGE/ADD TO MESSAGES--------------->\n\nuseEffect(() => {\n    socket.on('message', (message) => {\n        setMessages([...messages, message]);\n    });\n}, [messages]);\n\n// ----------------------------------------->\n\n\n    if (!location.name) {\n        return <Redirect to='/room' />\n    }\n\n    if (!token) {\n    return <Redirect to='/' />\n    }\n\n\n    return (\n        <div className='outerContainer'>\n            <div className='multiContainer'>\n                <div className='infoBar'>\n                    <div className='leftInnerContainer'>\n                        {/* img */}\n                        <h3>\n                            {roomName}\n                        </h3>   \n                    </div>\n                    {/* <div>\n                        { messages.map((message, i) => {\n                            <div key={i}>\n                                <h5>\n                                    {message.username}\n                                </h5>\n                                <p>\n                                    {message.message}  \n                                </p>  \n                            </div>\n                        })}\n                    </div> */}\n                    <form className='formz'>\n                        <input className='inputz'\n                            value={message}\n                            onChange={e => setMessage(e.target.value)}\n                            onKeyPress={e => e.key === 'Enter' ? sendMessage(e) : null}\n                            placeholder='What would you like to say?'\n                            >\n                        </input>\n                        <button className='sendButton'\n                            onClick={(e) => { sendMessage(e)}}\n                            >\n                            Send\n                        </button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Multiplayer;"]},"metadata":{},"sourceType":"module"}